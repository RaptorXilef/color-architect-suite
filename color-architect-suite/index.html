<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Felix Maywald / RaptorXilef">
    <meta name="copyright" content="¬© [2025] Felixx Maywald">
    <!-- Quelle (GitHub-Repository) -->
    <!-- Quelle: https://github.com/RaptorXilef/color-architect-suite -->
    <title>Color Architect Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Fira+Code:wght@400;500&display=swap');

        body { background-color: #0f172a; color: #f8fafc; font-family: 'Inter', sans-serif; }
        .card { background: #1e293b; border: 1px solid #334155; border-radius: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }

        input[type="color"] { -webkit-appearance: none; border: none; width: 100%; height: 45px; cursor: pointer; border-radius: 0.5rem; background: #334155; padding: 4px; }
        input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.3rem; }

        input[type="text"], input[type="number"], select { background: #0f172a; border: 1px solid #334155; padding: 0.5rem; border-radius: 0.5rem; color: white; width: 100%; text-align: center; font-family: 'Fira Code', monospace; font-size: 0.875rem; }

        .tab-btn { transition: all 0.2s; border-bottom: 2px solid transparent; white-space: nowrap; }
        .tab-btn.active { border-bottom: 2px solid #3b82f6; color: #3b82f6; background: rgba(59, 130, 246, 0.05); }

        .code-block { background: #0a0f1e; border-radius: 0.5rem; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.8rem; border: 1px solid #1e293b; position: relative; }
        .copy-btn { position: absolute; top: 0.5rem; right: 0.5rem; background: #334155; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.7rem; cursor: pointer; }
        .copy-btn:hover { background: #475569; }

        .custom-range { -webkit-appearance: none; width: 100%; height: 6px; background: #334155; border-radius: 5px; outline: none; }
        .custom-range::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; background: #3b82f6; cursor: pointer; border-radius: 50%; border: 2px solid #f8fafc; }
    </style>
</head>
<body class="p-4 md:p-8 flex flex-col items-center">

    <div class="max-w-6xl w-full">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-indigo-400 to-emerald-400">
                COLOR ARCHITECT SUITE
            </h1>
            <p class="text-slate-400 mt-2 text-md">Design-System-Engineering & Prozedurale Farbmetrik</p>
        </header>

        <!-- Tabs Navigation -->
        <div class="overflow-x-auto w-full mb-8 no-scrollbar">
            <nav class="flex min-w-max justify-center space-x-4 md:space-x-8 border-b border-slate-800">
                <button onclick="showTab('mix')" id="tab-mix" class="tab-btn px-3 pb-3 font-bold active uppercase text-[10px] tracking-widest">Mix Analyzer</button>
                <button onclick="showTab('contrast')" id="tab-contrast" class="tab-btn px-3 pb-3 font-bold uppercase text-[10px] tracking-widest">WCAG & YIQ</button>
                <button onclick="showTab('rule')" id="tab-rule" class="tab-btn px-3 pb-3 font-bold uppercase text-[10px] tracking-widest">60-30-10</button>
                <button onclick="showTab('semantic')" id="tab-semantic" class="tab-btn px-3 pb-3 font-bold uppercase text-[10px] tracking-widest">UI Semantic</button>
                <button onclick="showTab('scale')" id="tab-scale" class="tab-btn px-3 pb-3 font-bold uppercase text-[10px] tracking-widest">Multi-Scale</button>
                <button onclick="showTab('explorer')" id="tab-explorer" class="tab-btn px-3 pb-3 font-bold uppercase text-[10px] tracking-widest">Explorer</button>
            </nav>
        </div>

        <!-- 1. MIX ANALYZER -->
        <div id="panel-mix" class="tab-panel animate-in fade-in duration-500">
            <div class="grid md:grid-cols-2 gap-8">
                <div class="card p-8">
                    <h2 class="text-xl font-bold mb-6 flex items-center"><span class="mr-2">üß™</span> SCSS Mix-Calculator</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Basisfarbe (z.B. Primary)</label>
                            <input type="color" id="mixBaseColor" value="#3b82f6" oninput="syncHex('mixBaseColor', 'mixBaseHex'); updateMix();">
                            <input type="text" id="mixBaseHex" value="#3b82f6" onchange="syncColor('mixBaseHex', 'mixBaseColor'); updateMix();" class="mt-2">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Ziel-Farbe (Legacy Wert)</label>
                            <input type="color" id="mixTargetColor" value="#1d4ed8" oninput="syncHex('mixTargetColor', 'mixTargetHex'); updateMix();">
                            <input type="text" id="mixTargetHex" value="#1d4ed8" onchange="syncColor('mixTargetHex', 'mixTargetColor'); updateMix();" class="mt-2">
                        </div>
                    </div>
                </div>
                <div class="card p-8 bg-slate-900/50">
                    <h3 class="text-xs font-bold text-slate-500 uppercase mb-4">Ergebnis f√ºr dein SCSS</h3>
                    <div class="code-block text-emerald-400">
                        <button class="copy-btn" onclick="copyContent('mixOutput')">Copy</button>
                        <code id="mixOutput">mix(black, $primary, 15%)</code>
                    </div>
                    <p class="mt-6 text-sm text-slate-400 italic">Berechnet den exakten Mix-Anteil f√ºr dein Tokens-System.</p>
                </div>
            </div>
        </div>

        <!-- 2. CONTRAST / WCAG TOOL -->
        <div id="panel-contrast" class="tab-panel hidden animate-in fade-in duration-500">
            <div class="grid md:grid-cols-2 gap-8">
                <div class="card p-8">
                    <h2 class="text-xl font-bold mb-6 flex items-center"><span class="mr-2">üëÅÔ∏è</span> WCAG & YIQ Analyzer</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Hintergrundfarbe (Fl√§che)</label>
                            <input type="color" id="conBgColor" value="#3b82f6" oninput="syncHex('conBgColor', 'conBgHex'); updateContrast();">
                            <input type="text" id="conBgHex" value="#3b82f6" onchange="syncColor('conBgHex', 'conBgColor'); updateContrast();" class="mt-2">
                        </div>
                        <div class="pt-6 border-t border-slate-700">
                            <label class="block text-[10px] font-bold uppercase text-emerald-400 mb-4">Optionale Brand-Textfarben</label>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label class="block text-[9px] text-slate-500 mb-1">Dark Text</label><input type="color" id="conDarkText" value="#0f172a" oninput="updateContrast();"></div>
                                <div><label class="block text-[9px] text-slate-500 mb-1">Light Text</label><input type="color" id="conLightText" value="#f8fafc" oninput="updateContrast();"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card overflow-hidden flex flex-col">
                    <div id="conPreview" class="flex-grow p-12 flex flex-col items-center justify-center text-center transition-colors duration-500">
                        <h3 id="conPreviewText" class="text-2xl font-black mb-2">Text Vorschau</h3>
                        <p id="conPreviewSub" class="text-sm opacity-80">Barrierefreiheit pr√ºfen</p>
                    </div>
                    <div class="p-6 bg-slate-900 grid grid-cols-2 gap-4 border-t border-slate-700">
                        <div class="bg-slate-800 p-3 rounded text-center"><p class="text-[9px] uppercase text-slate-500 mb-1">YIQ Entscheidung</p><span id="yiqRes" class="text-sm font-bold text-blue-400">-</span></div>
                        <div class="bg-slate-800 p-3 rounded text-center"><p class="text-[9px] uppercase text-slate-500 mb-1">Ratio</p><span id="ratioRes" class="text-sm font-bold text-white">-</span></div>
                        <div id="wcagBadge" class="col-span-2 py-2 rounded text-center text-[10px] font-black uppercase tracking-tighter">Check...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. 60-30-10 RULE -->
        <div id="panel-rule" class="tab-panel hidden animate-in fade-in duration-500">
            <div class="card p-8">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-xl font-bold">üìê 60-30-10 Basis</h2>
                    <div class="flex p-1 bg-slate-900 rounded-lg border border-slate-700">
                        <button onclick="setRuleMode('light')" id="btn-mode-light" class="px-4 py-1.5 text-[10px] font-bold rounded uppercase transition-all">Light</button>
                        <button onclick="setRuleMode('dark')" id="btn-mode-dark" class="px-4 py-1.5 text-[10px] font-bold rounded uppercase transition-all ml-1">Dark</button>
                    </div>
                </div>
                <div class="grid md:grid-cols-3 gap-12">
                    <div>
                        <label class="block text-[10px] font-bold uppercase text-blue-400 mb-2">Akzentfarbe (10%)</label>
                        <input type="color" id="ruleAccent" value="#3b82f6" oninput="updateRule();">
                    </div>
                    <div class="md:col-span-2 space-y-6">
                        <div class="h-24 rounded-xl overflow-hidden flex border border-slate-800 shadow-xl">
                            <div id="bar60" class="h-full flex items-center justify-center" style="width: 60%;"><span id="val60" class="text-[10px] font-bold"></span></div>
                            <div id="bar30" class="h-full flex items-center justify-center" style="width: 30%;"><span id="val30" class="text-[10px] font-bold"></span></div>
                            <div id="bar10" class="h-full flex items-center justify-center" style="width: 10%;"><span id="val10" class="text-[10px] font-bold"></span></div>
                        </div>
                        <div class="code-block text-blue-300"><pre id="ruleOutput" class="whitespace-pre-wrap"></pre></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. UI SEMANTIC GENERATOR -->
        <div id="panel-semantic" class="tab-panel hidden animate-in fade-in duration-500">
            <div class="grid md:grid-cols-3 gap-8">
                <div class="card p-8 md:col-span-1">
                    <h2 class="text-xl font-bold mb-6 flex items-center"><span class="mr-2">üé®</span> UI Semantics</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Marken-Prim√§rfarbe</label>
                            <input type="color" id="semBase" value="#3b82f6" oninput="updateSemantic();">
                        </div>
                        <div class="bg-slate-900/50 p-4 rounded-lg text-xs text-slate-400 leading-relaxed italic border border-slate-800">
                            Generiert automatisch kontrast-sichere Komponentenfarben basierend auf deiner Marken-ID.
                        </div>
                    </div>
                </div>
                <div class="card p-8 md:col-span-2">
                    <h3 class="text-xs font-bold text-slate-500 uppercase mb-6 tracking-widest">Komponenten Vorschau</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="semContainer">
                        <!-- JS generated items -->
                    </div>
                    <div class="mt-8 pt-8 border-t border-slate-700">
                        <div class="code-block text-emerald-400">
                            <button class="copy-btn" onclick="copyContent('semOutput')">Copy</button>
                            <pre id="semOutput" class="whitespace-pre-wrap"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. MULTI-STEP SCALE -->
        <div id="panel-scale" class="tab-panel hidden animate-in fade-in duration-500">
            <div class="card p-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
                    <h2 class="text-xl font-bold flex items-center"><span class="mr-2">ü™ú</span> Multi-Step Scale</h2>
                    <div class="flex items-center space-x-4 bg-slate-900 p-2 rounded-lg border border-slate-700">
                        <span class="text-[10px] font-bold uppercase text-slate-500">Stufen: <span id="scaleCountVal" class="text-blue-400">7</span></span>
                        <input type="range" id="scaleCount" min="3" max="13" step="2" value="7" oninput="updateScale();" class="custom-range w-32">
                    </div>
                </div>
                <div class="space-y-8">
                    <div class="grid md:grid-cols-4 gap-8">
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Basis Farbe</label>
                            <input type="color" id="scaleBase" value="#3b82f6" oninput="updateScale();">
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Skala Vorschau</label>
                            <div id="scalePreview" class="h-16 flex rounded-lg overflow-hidden border border-slate-700 shadow-xl"></div>
                        </div>
                    </div>
                    <div class="code-block text-blue-300">
                        <button class="copy-btn" onclick="copyContent('scaleOutput')">Copy</button>
                        <pre id="scaleOutput" class="whitespace-pre-wrap"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. CONTRAST EXPLORER -->
        <div id="panel-explorer" class="tab-panel hidden animate-in fade-in duration-500">
            <div class="grid md:grid-cols-3 gap-8">
                <div class="card p-8">
                    <h2 class="text-xl font-bold mb-6 flex items-center"><span class="mr-2">üîç</span> Explorer</h2>
                    <div>
                        <label class="block text-[10px] font-bold uppercase text-slate-500 mb-2">Hintergrundfarbe</label>
                        <input type="color" id="expBase" value="#0f172a" oninput="updateExplorer();">
                    </div>
                    <p class="mt-6 text-xs text-slate-400 leading-relaxed italic">Findet die mathematisch besten Akzentfarben f√ºr Buttons oder Infoboxen basierend auf dem gew√§hlten Hintergrund.</p>
                </div>
                <div class="md:col-span-2 space-y-4" id="expResults">
                    <!-- JS generated results -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- TABS LOGIC ---
        function showTab(id) {
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('panel-' + id).classList.remove('hidden');
            document.getElementById('tab-' + id).classList.add('active');
            window.dispatchEvent(new Event('resize')); // Fix for any alignment issues
        }

        // --- CORE HELPERS ---
        function syncHex(colorId, hexId) { document.getElementById(hexId).value = document.getElementById(colorId).value; }
        function syncColor(hexId, colorId) { document.getElementById(colorId).value = document.getElementById(hexId).value; }
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16) } : null;
        }
        function rgbToHex(r, g, b) { return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1); }
        function mix(c1, c2, p) {
            const r = Math.round(c1.r * p + c2.r * (1 - p));
            const g = Math.round(c1.g * p + c2.g * (1 - p));
            const b = Math.round(c1.b * p + c2.b * (1 - p));
            return { r, g, b, hex: rgbToHex(r, g, b) };
        }
        function getLuminance(r, g, b) {
            let a = [r, g, b].map(v => { v /= 255; return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4); });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
        }
        function getContrastRatio(rgb1, rgb2) {
            let l1 = getLuminance(rgb1.r, rgb1.g, rgb1.b) + 0.05;
            let l2 = getLuminance(rgb2.r, rgb2.g, rgb2.b) + 0.05;
            return l1 > l2 ? l1 / l2 : l2 / l1;
        }
        function getYIQ(rgb) { return ((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114)) / 1000; }
        function getBestText(bgRgb) { return getYIQ(bgRgb) >= 128 ? {hex: "#000000", r:0, g:0, b:0} : {hex: "#ffffff", r:255, g:255, b:255}; }

        // HSL Conversion for Harmony
        function rgbToHsl(r, g, b) {
            r /= 255, g /= 255, b /= 255;
            let max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            if (max == min) { h = s = 0; } else {
                let d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return { h: h * 360, s: s * 100, l: l * 100 };
        }
        function hslToRgb(h, s, l) {
            s /= 100; l /= 100; h /= 360;
            let r, g, b;
            if (s == 0) { r = g = b = l; } else {
                function hue2rgb(p, q, t) {
                    if (t < 0) t += 1; if (t > 1) t -= 1;
                    if (t < 1 / 6) return p + (q - p) * 6 * t;
                    if (t < 1 / 2) return q;
                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                    return p;
                }
                let q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                let p = 2 * l - q;
                r = hue2rgb(p, q, h + 1 / 3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1 / 3);
            }
            return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255), hex: rgbToHex(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)) };
        }

        function copyContent(id) {
            const text = document.getElementById(id).innerText;
            const ta = document.createElement("textarea"); ta.value = text;
            document.body.appendChild(ta); ta.select(); document.execCommand("copy"); document.body.removeChild(ta);
            const btn = event.target; const old = btn.innerText; btn.innerText = "Copied!"; setTimeout(()=>btn.innerText = old, 1200);
        }

        // --- TOOL 1: MIX ---
        function updateMix() {
            const base = hexToRgb(document.getElementById('mixBaseColor').value);
            const target = hexToRgb(document.getElementById('mixTargetColor').value);
            if(!base || !target) return;
            const bAvg = (base.r + base.g + base.b)/3;
            const tAvg = (target.r + target.g + target.b)/3;
            let pColor = tAvg > bAvg ? {r:255, g:255, b:255, name:'white'} : {r:0, g:0, b:0, name:'black'};
            const ds = [(target.r-base.r)/(pColor.r-base.r), (target.g-base.g)/(pColor.g-base.g), (target.b-base.b)/(pColor.b-base.b)].filter(v=>isFinite(v)&&!isNaN(v));
            const p = ds.length > 0 ? Math.round((ds.reduce((a,b)=>a+b)/ds.length)*100) : 0;
            document.getElementById('mixOutput').innerText = `mix(${pColor.name}, $base-color, ${Math.max(0, p)}%)`;
        }

        // --- TOOL 2: CONTRAST ---
        function updateContrast() {
            const bg = hexToRgb(document.getElementById('conBgColor').value);
            const dark = hexToRgb(document.getElementById('conDarkText').value);
            const light = hexToRgb(document.getElementById('conLightText').value);
            const isL = getYIQ(bg) >= 128;
            const sel = isL ? dark : light;
            const selHex = isL ? document.getElementById('conDarkText').value : document.getElementById('conLightText').value;
            const prev = document.getElementById('conPreview');
            prev.style.backgroundColor = document.getElementById('conBgColor').value;
            document.getElementById('conPreviewText').style.color = selHex;
            document.getElementById('conPreviewSub').style.color = selHex;
            document.getElementById('yiqRes').innerText = isL ? "Dunkel" : "Hell";
            const r = getContrastRatio(bg, sel).toFixed(2);
            document.getElementById('ratioRes').innerText = r + ":1";
            const b = document.getElementById('wcagBadge');
            b.innerText = r >= 7 ? "AAA - EXZELLENT" : r >= 4.5 ? "AA - BESTANDEN" : "FAIL - UNLESBAR";
            b.className = `col-span-2 py-2 rounded text-center text-[10px] font-black uppercase ${r>=7?'bg-emerald-500':r>=4.5?'bg-blue-500':'bg-red-600'}`;
        }

        // --- TOOL 3: 60-30-10 ---
        let ruleMode = 'light';
        function setRuleMode(m) { ruleMode = m; updateRule(); }
        function updateRule() {
            const acc = hexToRgb(document.getElementById('ruleAccent').value);
            let b = ruleMode === 'light' ? "#F8FAFC" : "#0F172A";
            let s = ruleMode === 'light' ? rgbToHex(Math.round(acc.r*0.1 + 225), Math.round(acc.g*0.1 + 225), Math.round(acc.b*0.1 + 225)) : rgbToHex(Math.round(acc.r*0.15), Math.round(acc.g*0.15), Math.round(acc.b*0.15));
            document.getElementById('bar60').style.backgroundColor = b;
            document.getElementById('val60').innerText = b;
            document.getElementById('bar30').style.backgroundColor = s;
            document.getElementById('val30').innerText = s;
            document.getElementById('bar10').style.backgroundColor = document.getElementById('ruleAccent').value;
            document.getElementById('val10').innerText = document.getElementById('ruleAccent').value;
            document.getElementById('ruleOutput').innerText = `$base: ${b};\n$secondary: ${s};\n$accent: ${document.getElementById('ruleAccent').value};`;
        }

        // --- TOOL 4: SEMANTIC UI ---
        function updateSemantic() {
            const base = hexToRgb(document.getElementById('semBase').value);
            const white = {r:255, g:255, b:255};
            const black = {r:0, g:0, b:0};

            const types = [
                { name: 'Primary', color: base },
                { name: 'Secondary', color: mix(base, {r:128, g:128, b:128}, 0.5) },
                { name: 'Info', color: {r:59, g:130, b:246} },
                { name: 'Success', color: {r:16, g:185, b:129} },
                { name: 'Warning', color: {r:245, g:158, b:11} },
                { name: 'Danger', color: {r:239, g:68, b:68} }
            ];

            const container = document.getElementById('semContainer');
            container.innerHTML = '';
            let scss = '$ui-semantics: (\n';

            types.forEach(t => {
                const bg = t.color;
                const text = getBestText(bg);
                const hover = mix(bg, black, 0.85);

                const div = document.createElement('div');
                div.className = "p-4 rounded-lg flex flex-col items-center justify-center transition-transform hover:scale-105";
                div.style.backgroundColor = rgbToHex(bg.r, bg.g, bg.b);
                div.style.color = text.hex;
                div.innerHTML = `<span class="text-[10px] font-black uppercase">${t.name}</span><span class="text-[9px] font-mono mt-1 opacity-70">${rgbToHex(bg.r, bg.g, bg.b)}</span>`;
                container.appendChild(div);

                scss += `  "${t.name.toLowerCase()}": ( "bg": ${rgbToHex(bg.r, bg.g, bg.b)}, "text": ${text.hex}, "hover": ${hover.hex} ),\n`;
            });
            scss += ');';
            document.getElementById('semOutput').innerText = scss;
        }

        // --- TOOL 5: MULTI-SCALE ---
        function updateScale() {
            const base = hexToRgb(document.getElementById('scaleBase').value);
            const count = parseInt(document.getElementById('scaleCount').value);
            document.getElementById('scaleCountVal').innerText = count;
            const preview = document.getElementById('scalePreview');
            preview.innerHTML = '';
            let scss = '$color-scale: (\n';

            for(let i=0; i<count; i++) {
                const ratio = i / (count - 1);
                const color = ratio < 0.5 ? mix(base, {r:255, g:255, b:255}, (0.5 - ratio) * 2) : mix({r:0, g:0, b:0}, base, (ratio - 0.5) * 2);
                const step = (i + 1) * 100;

                const div = document.createElement('div');
                div.style.flex = "1";
                div.style.backgroundColor = color.hex;
                preview.appendChild(div);

                scss += `  "${step}": ${color.hex},\n`;
            }
            scss += ');';
            document.getElementById('scaleOutput').innerText = scss;
        }

        // --- TOOL 6: EXPLORER ---
        function updateExplorer() {
            const bg = hexToRgb(document.getElementById('expBase').value);
            const hsl = rgbToHsl(bg.r, bg.g, bg.b);
            const container = document.getElementById('expResults');
            container.innerHTML = '';

            const harmonies = [
                { name: 'Komplement√§r', h: (hsl.h + 180) % 360 },
                { name: 'Triadisch A', h: (hsl.h + 120) % 360 },
                { name: 'Triadisch B', h: (hsl.h + 240) % 360 },
                { name: 'Analog A', h: (hsl.h + 30) % 360 },
                { name: 'Analog B', h: (hsl.h - 30 + 360) % 360 }
            ];

            harmonies.forEach(har => {
                const acc = hslToRgb(har.h, Math.max(hsl.s, 60), Math.max(hsl.l, 50));
                const ratio = getContrastRatio(bg, acc).toFixed(2);
                const text = getBestText(acc);

                const div = document.createElement('div');
                div.className = "card p-4 flex items-center justify-between border-l-4";
                div.style.borderLeftColor = acc.hex;

                div.innerHTML = `
                    <div>
                        <p class="text-[10px] font-bold text-slate-500 uppercase">${har.name}</p>
                        <p class="text-sm font-black text-white">${acc.hex}</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="px-4 py-2 rounded font-bold text-xs" style="background-color: ${acc.hex}; color: ${text.hex}">Button</div>
                        <div class="text-right">
                            <p class="text-[9px] font-bold text-slate-500 uppercase">Contrast</p>
                            <p class="text-xs font-mono ${ratio >= 4.5 ? 'text-emerald-400' : 'text-red-400'}">${ratio}:1</p>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        window.onload = () => {
            updateMix(); updateContrast(); updateRule(); updateSemantic(); updateScale(); updateExplorer();
        };
    </script>
</body>
</html>
